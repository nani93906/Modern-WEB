<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-T8C6RVQM');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modern Web Design | Home</title>

  <link rel="stylesheet" href="styles.css" />

  <style>
    .login-modal {
      display:none;
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.6);
      justify-content:center;
      align-items:center;
    }

    .login-box {
      background:#fff;
      padding:20px;
      width:300px;
      border-radius:6px;
    }

    .login-box input {
      width:100%;
      margin:8px 0;
      padding:8px;
    }

    .login-box button {
      width:100%;
      padding:8px;
      background:#007bff;
      color:#fff;
      border:none;
      border-radius:4px;
      cursor:pointer;
    }

    .error {
      color:red;
      display:none;
      font-size:14px;
    }
  </style>

</head>

<body>

  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8C6RVQM"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <header>
    <div class="container">
      <div class="logo">ModernWeb</div>
      <nav>
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="products.html">Our Products</a></li>
          <li><a href="cart.html">Cart</a></li>
          <li><a href="#" id="signInBtn">Sign In</a></li>
          <li><a href="#" id="signOutBtn" style="display:none;">Sign Out</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h1>Welcome to Modern Web Design</h1>
      <p>Creating beautiful, responsive websites for the modern world.</p>
    </div>
  </section>

  <!-- LOGIN MODAL -->
  <div class="login-modal" id="loginModal">
    <div class="login-box">
      <h3>Sign In</h3>
      <input type="email" id="email" placeholder="Email" />
      <input type="password" id="password" placeholder="Password" />
      <button id="loginSubmit">Login</button>
      <p class="error" id="loginError">Invalid credentials</p>
    </div>
  </div>

<script>

window.dataLayer = window.dataLayer || [];

/* =========================
   GA4 PAGE VIEW
========================= */
dataLayer.push({
  event: "page_view",
  page_title: document.title,
  page_location: window.location.href,
  page_path: window.location.pathname
});

/* =========================
   HEADER NAVIGATION CLICK
========================= */
document.querySelectorAll("nav a").forEach(function(link){
  link.addEventListener("click", function(){

    dataLayer.push({
      event: "select_content",
      content_type: "header_navigation",
      item_id: this.innerText.toLowerCase().replace(/\s/g, "_"),
      item_name: this.innerText
    });

  });
});

/* =========================
   LOGIN LOGIC
========================= */
const signInBtn = document.getElementById("signInBtn");
const signOutBtn = document.getElementById("signOutBtn");
const loginModal = document.getElementById("loginModal");

const user = JSON.parse(localStorage.getItem("user"));

if (user) {
  signInBtn.style.display = "none";
  signOutBtn.style.display = "inline";
}

/* LOGIN INITIATED */
signInBtn.addEventListener("click", function(e){
  e.preventDefault();
  loginModal.style.display = "flex";

  dataLayer.push({
    event: "login",
    method: "initiate"
  });
});

/* LOGIN SUBMIT */
document.getElementById("loginSubmit").addEventListener("click", function(){

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  if (email === "user@test.com" && password === "123456") {

    localStorage.setItem("user", JSON.stringify({
      userId: "U12345",
      userType: "registered"
    }));

    loginModal.style.display = "none";
    signInBtn.style.display = "none";
    signOutBtn.style.display = "inline";

    dataLayer.push({
      event: "login",
      method: "email"
    });

  } else {

    document.getElementById("loginError").style.display = "block";

    dataLayer.push({
      event: "login_error",
      method: "email"
    });
  }
});

/* LOGOUT */
signOutBtn.addEventListener("click", function(e){
  e.preventDefault();

  localStorage.removeItem("user");

  signInBtn.style.display = "inline";
  signOutBtn.style.display = "none";

  dataLayer.push({
    event: "logout"
  });
});

</script>

</body>
</html>
